# Generated by Django 4.0.2 on 2022-02-25 17:04

from django.contrib.auth.models import Group
from django.db import migrations, models
import django.db.models.deletion
import django_extensions.db.fields
import versatileimagefield.fields
import app.models


COUNTRIES = [
    {"name": "Nigeria", "iso_3166": "NG"},
    {"name": "Dominican Republic"},
    {"name": "Lithuania"},
    {"name": "Luxembourg"},
    {"name": "Madagascar"},
    {"name": "Malawi"},
    {"name": "Malaysia"},
    {"name": "Maldives"},
    {"name": "Mali"},
    {"name": "Malta"},
    {"name": "Marshall Islands"},
    {"name": "Mauritania"},
    {"name": "Mauritius"},
    {"name": "Mexico"},
    {"name": "Micronesia"},
    {"name": "Moldova"},
    {"name": "Monaco"},
    {"name": "Mongolia"},
    {"name": "Montenegro"},
    {"name": "Morocco"},
    {"name": "Mozambique"},
    {"name": "Myanmar"},
    {"name": "Namibia"},
    {"name": "Nauru"},
    {"name": "Nepal"},
    {"name": "Netherlands"},
    {"name": "New Zealand"},
    {"name": "Nicaragua"},
    {"name": "Niger"},
    {"name": "North Korea"},
    {"name": "North Macedonia"},
    {"name": "Norway"},
    {"name": "Oman"},
    {"name": "Pakistan"},
    {"name": "Palau"},
    {"name": "Palestine State"},
    {"name": "Panama"},
    {"name": "Papua New Guinea"},
    {"name": "Paraguay"},
    {"name": "Peru"},
    {"name": "Philippines"},
    {"name": "Poland"},
    {"name": "Portugal"},
    {"name": "Qatar"},
    {"name": "Romania"},
    {"name": "Russia"},
    {"name": "Rwanda"},
    {"name": "St. Kitts and Nevis"},
    {"name": "St. Lucia"},
    {"name": "St. Vincent"},
    {"name": "Samoa"},
    {"name": "San Marino"},
    {"name": "Sao Tome and Principe"},
    {"name": "Saudi Arabia"},
    {"name": "Senegal"},
    {"name": "Serbia"},
    {"name": "Seychelles"},
    {"name": "Sierra Leone"},
    {"name": "Singapore"},
    {"name": "Slovakia"},
    {"name": "Slovenia"},
    {"name": "Solomon Islands"},
    {"name": "Somalia"},
    {"name": "South Africa"},
    {"name": "South Korea"},
    {"name": "South Sudan"},
    {"name": "Spain"},
    {"name": "Sri Lanka"},
    {"name": "Sudan"},
    {"name": "Suriname"},
    {"name": "Sweden"},
    {"name": "Switzerland"},
    {"name": "Syria"},
    {"name": "Tajikistan"},
    {"name": "Tanzania"},
    {"name": "Thailand"},
    {"name": "Timor-Leste"},
    {"name": "Togo"},
    {"name": "Tonga"},
    {"name": "Trinidad and Tobago"},
    {"name": "Tunisia"},
    {"name": "Turkey"},
    {"name": "Turkmenistan"},
    {"name": "Tuvalu"},
    {"name": "Uganda"},
    {"name": "Ukraine"},
    {"name": "United Arab Emirates"},
    {"name": "United Kingdom"},
    {"name": "United States"},
    {"name": "Uruguay"},
    {"name": "Uzbekistan"},
    {"name": "Vanuatu"},
    {"name": "Venezuela"},
    {"name": "Vietnam"},
    {"name": "Yemen"},
    {"name": "Zambia"},
    {"name": "Zimbabwe"},
    {"name": "Afghanistan"},
    {"name": "Albania"},
    {"name": "Algeria"},
    {"name": "Andorra"},
    {"name": "Angola"},
    {"name": "Antigua and Barbuda"},
    {"name": "Argentina"},
    {"name": "Armenia"},
    {"name": "Australia"},
    {"name": "Austria"},
    {"name": "Azerbaijan"},
    {"name": "Bahamas"},
    {"name": "Bahrain"},
    {"name": "Bangladesh"},
    {"name": "Barbados"},
    {"name": "Belarus"},
    {"name": "Belgium"},
    {"name": "Belize"},
    {"name": "Benin"},
    {"name": "Bhutan"},
    {"name": "Bolivia"},
    {"name": "Bosnia and Herzegovina"},
    {"name": "Botswana"},
    {"name": "Brazil"},
    {"name": "Brunei"},
    {"name": "Bulgaria"},
    {"name": "Burkina Faso"},
    {"name": "Burundi"},
    {"name": "CÃ´te d'Ivoire"},
    {"name": "Cabo Verde"},
    {"name": "Cambodia"},
    {"name": "Cameroon"},
    {"name": "Canada"},
    {"name": "Central African Republic"},
    {"name": "Chad"},
    {"name": "Chile"},
    {"name": "China"},
    {"name": "Colombia"},
    {"name": "Comoros"},
    {"name": "Congo"},
    {"name": "Democratic Republic of Congo"},
    {"name": "Costa Rica"},
    {"name": "Croatia"},
    {"name": "Cuba"},
    {"name": "Cyprus"},
    {"name": "Czech Republic"},
    {"name": "Denmark"},
    {"name": "Djibouti"},
    {"name": "Dominica"},
    {"name": "Ecuador"},
    {"name": "Egypt"},
    {"name": "El Salvador"},
    {"name": "Equatorial Guinea"},
    {"name": "Eritrea"},
    {"name": "Estonia"},
    {"name": "Eswatini"},
    {"name": "Ethiopia"},
    {"name": "Fiji"},
    {"name": "Finland"},
    {"name": "France"},
    {"name": "Gabon"},
    {"name": "Gambia"},
    {"name": "Georgia"},
    {"name": "Germany"},
    {"name": "Ghana"},
    {"name": "Greece"},
    {"name": "Grenada"},
    {"name": "Guatemala"},
    {"name": "Guinea"},
    {"name": "Guinea-Bissau"},
    {"name": "Guyana"},
    {"name": "Haiti"},
    {"name": "Holy See"},
    {"name": "Honduras"},
    {"name": "Hungary"},
    {"name": "Iceland"},
    {"name": "India"},
    {"name": "Indonesia"},
    {"name": "Iran"},
    {"name": "Iraq"},
    {"name": "Ireland"},
    {"name": "Israel"},
    {"name": "Italy"},
    {"name": "Jamaica"},
    {"name": "Japan"},
    {"name": "Jordan"},
    {"name": "Kazakhstan"},
    {"name": "Kenya"},
    {"name": "Kiribati"},
    {"name": "Kuwait"},
    {"name": "Kyrgyzstan"},
    {"name": "Laos"},
    {"name": "Latvia"},
    {"name": "Lebanon"},
    {"name": "Lesotho"},
    {"name": "Liberia"},
    {"name": "Libya"},
    {"name": "Liechtenstein"}
]


def populate_countries(apps, schema_editor):
    db_alias = schema_editor.connection.alias

    Country = apps.get_model("app", "Country")
    for country in COUNTRIES:
        Country.objects.using(db_alias).get_or_create(**country)


def reverse_operation(_apps, _schema_editor):
    pass


def create_admin_group(apps, schema_editor):
    Group.objects.create(name='admin')


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('auth', '0012_alter_user_first_name_max_length'),
    ]

    operations = [
        migrations.CreateModel(
            name='Country',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created', django_extensions.db.fields.CreationDateTimeField(auto_now_add=True, verbose_name='created')),
                ('modified', django_extensions.db.fields.ModificationDateTimeField(auto_now=True, verbose_name='modified')),
                ('name', models.CharField(max_length=50, unique=True)),
                ('iso_3166', models.CharField(max_length=10)),
            ],
            options={
                'get_latest_by': 'modified',
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='Airport',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created', django_extensions.db.fields.CreationDateTimeField(auto_now_add=True, verbose_name='created')),
                ('modified', django_extensions.db.fields.ModificationDateTimeField(auto_now=True, verbose_name='modified')),
                ('name', models.CharField(max_length=100)),
                ('code', models.CharField(max_length=3)),
                ('country', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='airports', to='app.country')),
            ],
            options={
                'get_latest_by': 'modified',
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='User',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('password', models.CharField(max_length=128, verbose_name='password')),
                ('last_login', models.DateTimeField(blank=True, null=True, verbose_name='last login')),
                ('created', django_extensions.db.fields.CreationDateTimeField(auto_now_add=True, verbose_name='created')),
                ('modified', django_extensions.db.fields.ModificationDateTimeField(auto_now=True, verbose_name='modified')),
                ('email', models.EmailField(max_length=254, unique=True)),
                ('phone_number', models.CharField(blank=True, max_length=20, null=True, unique=True)),
                ('first_name', models.CharField(max_length=30)),
                ('last_name', models.CharField(max_length=30)),
                ('avatar', versatileimagefield.fields.VersatileImageField(blank=True, null=True, upload_to=app.models.path_and_filename, verbose_name='guardian_avatar')),
                ('is_active', models.BooleanField(default=False)),
                ('is_staff', models.BooleanField(default=False)),
                ('is_superuser', models.BooleanField(default=False)),
                ('country', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to='app.country')),
                ('groups', models.ManyToManyField(blank=True, help_text='The groups this user belongs to. A user will get all permissions granted to each of their groups.', related_name='user_set', related_query_name='user', to='auth.Group', verbose_name='groups')),
                ('user_permissions', models.ManyToManyField(blank=True, help_text='Specific permissions for this user.', related_name='user_set', related_query_name='user', to='auth.Permission', verbose_name='user permissions')),
            ],
            options={
                'abstract': False,
            },
            managers=[
                ('objects', app.models.UserManager()),
            ],
        ),
        migrations.RunPython(create_admin_group),
        migrations.RunPython(populate_countries, reverse_operation)
    ]
